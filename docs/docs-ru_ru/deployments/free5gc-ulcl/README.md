–î–∞–Ω–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è —Å–æ–¥–µ—Ä–∂–∏—Ç –æ–ø–∏—Å–∞–Ω–∏–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ 5G —è–¥—Ä–∞ Free5GC —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º eUPF –≤ Kubernetes –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è(helmcharts) –∏–∑ –ø—Ä–æ–µ–∫—Ç–∞ [Orange-OpenSource/towards5gs-helm](https://github.com/Orange-OpenSource/towards5gs-helm) –∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ docs/deployments/free5gc-ulcl. 

## –û–ø—Ü–∏—è UpLink CLassifier (ULCL)

–û–ø—Ü–∏—è ULCL –ø–æ–¥—Ä–∞–∑—É–º–µ–≤–∞–µ—Ç —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ –º–æ–¥—É–ª—è UPF(I-UPF), –∫–æ—Ç–æ—Ä—ã–π –º–∞—Ä—à—Ä—É—Ç–∏–∑–∏—Ä—É–µ—Ç —Ç—Ä–∞—Ñ–∏–∫ –º–µ–∂–¥—É —Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω—ã–º–∏ UPF (PSA-UPF).  

–í –¥–∞–Ω–Ω–æ–º –ø—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ —Å–ª–µ–¥—É—é—â–∞—è:
- UE--gNodeB--upfb--upf1--Internet (–º–∞—Ä—à—Ä—É—Ç –ø–æ-—É–º–æ–ª—á–∞–Ω–∏—é)
- UE--gNodeB--upfb--upf2--Internet--1.1.1.1/32 (–º–∞—Ä—à—Ä—É—Ç –¥–ª—è –∞–±–æ–Ω–µ–Ω—Ç–∞ —Å imsi 208930000000003)

eUPF —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è –∫–∞–∫ upfb. –í –∫–∞—á–µ—Å—Ç–≤–µ upf1 –∏ upf2 –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –º–æ–¥—É–ª–∏ –∏–∑ free5gc.

–†–∞–∑–Ω–∏—Ü—É –≤ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ –º–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∫–æ–º–∞–Ω–¥—ã traceroute, –≤—ã–ø–æ–ª–Ω—è–µ–º–æ–π –Ω–∞ —ç–º—É–ª—è—Ç–æ—Ä–µ UE:
```powershell
bash-5.1# traceroute -i uesimtun0 www.google.com -w 1
traceroute to www.google.com (173.194.222.103), 30 hops max, 46 byte packets
 1  10.233.64.41 (10.233.64.41)  1.518 ms  1.805 ms  1.459 ms
 ......
 bash-5.1# traceroute -i uesimtun0 -w1 1.1.1.1
traceroute to 1.1.1.1 (1.1.1.1), 30 hops max, 46 byte packets
 1  10.233.64.56 (10.233.64.56)  1.512 ms  1.176 ms  0.778 ms
```

## –ö—Ä–∞—Ç–∫–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

### –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å kubernetes —Ö–æ—Å—Ç - —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –º–æ–¥—É–ª—å —è–¥—Ä–∞ gtp5g

–ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Å–±–æ—Ä–∫–∏ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –º–æ–¥—É–ª—è gtp5g, –∫–æ—Ç–æ—Ä—ã–π —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–ª—è Free5gc UPFs:

```
apt-get update; apt-get install git build-essential -y; \
cd /tmp; \
git clone --depth 1 https://github.com/free5gc/gtp5g.git; \
cd gtp5g/; \
make && make install
```

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –º–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –º–æ–¥—É–ª—å –∑–∞–≥—Ä—É–∑–∏–ª—Å—è:

`lsmod | grep ^gtp5g`

* [—É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —É—Ç–∏–ª–∏—Ç—É helm](https://helm.sh/docs/intro/install/)

* –¥–æ–±–∞–≤–∏—Ç—å helm-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π towards5gs

    ```
    helm repo add towards5gs 'https://raw.githubusercontent.com/Orange-OpenSource/towards5gs-helm/main/repo/'
    helm repo update
    ```

### –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é free5gculcl —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥ make
üìù –ß—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ IP-–∞–¥—Ä–µ—Å–∞—Ü–∏–∏ –∏–∑-–∑–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å–µ—Ç–∏ ipvlan —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ª—é–±—ã–µ –¥—Ä—É–≥–∏–µ –ø–æ–¥—ã, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç —Ç–∞–∫–∂–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ipvlan –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–∞–ø–∫—É docs/deployments/free5gc-ulcl
1. –í—ã–ø–æ–ª–Ω–∏—Ç–µ `make eupf` –¥–ª—è —Ä–∞–∑–≤–µ—Ä–Ω—ã–≤–∞–Ω–∏—è eUPF –≤ –∫–∞—á–µ—Å—Ç–≤–µ upfb
1. –í—ã–ø–æ–ª–Ω–∏—Ç–µ `make upf` –¥–ª—è —Ä–∞–∑–≤–µ—Ä–Ω—ã–≤–∞–Ω–∏—è Free5gc –º–æ–¥—É–ª–µ–π UPF –≤ –∫–∞—á–µ—Å—Ç–≤–µ upf1, upf2
1. `make free5gc` to install free5gc core
1. –î–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤–æ–≥–æ –∞–±–æ–Ω–µ–Ω—Ç–∞ –≤ —Å–∏—Å—Ç–µ–º—É —á–µ—Ä–µ–∑ web-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ free5gc

   –î–ª—è —ç—Ç–æ–≥–æ –ø—Ä–æ–±—Ä–æ—Å—Ç–µ –ø–æ—Ä—Ç –ø–æ–¥–∞ —Å –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º –Ω–∞ localhost

   ```powershell
   kubectl port-forward service/webui-service 5000:5000 -n free5gc
   ```

   –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ http://127.0.0.1:5000 (–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å "admin" —Å –ø–∞—Ä–æ–ª–µ–º "free5gc"), –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –º–µ–Ω—é "subscribers", –Ω–∞–∂–º–∏—Ç–µ "new subscriber", –æ—Å—Ç–∞–≤—å—Ç–µ –≤—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π, –Ω–∞–∂–º–∏—Ç–µ "submit"

   –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–æ–±—Ä–æ—Å –ø–æ—Ä—Ç–∞ –∫–æ–º–∞–Ω–¥–æ–π `Ctrl + C`

1. –í—ã–ø–æ–ª–Ω–∏—Ç–µ `make ueransim` –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è —ç–º—É–ª—è—Ç–æ—Ä–æ–≤ gNodeB and UE.

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤–æ–π–¥–∏—Ç–µ –≤ –æ–±–æ–ª–æ—á–∫—É –ø–æ–¥–∞ ueransim:

* `make ueransim_shell`

  –ö–æ–º–∞–Ω–¥–∞ `make clean` —É–¥–∞–ª–∏—Ç –≤—Å–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –ø–æ–¥—ã –∏–∑ –∫–ª–∞—Å—Ç–µ—Ä–∞
